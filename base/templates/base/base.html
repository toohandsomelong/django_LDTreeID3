<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}My Site{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'base/style.css' %}">
    <link rel="icon" type="image/x-icon" href="{% static 'base/assets/carrot.png' %}">
    <link rel="stylesheet" href="{% static 'home/style.css' %}">
</head>
<body>

    <!-- HEADER -->
    <header>
        <nav>
            <a href="/">Home<div class="afterhover"></div></a>
            <a href="/visualizeTree/">Visualize Tree<div class="afterhover"></div></a>
            {% if user.is_staff %}
                <a href="/admin/">Admin<div class="afterhover"></div></a>
            {% endif %}
            <a href="/accounts/" style="margin-left: auto;">My Account<div class="afterhover"></div></a>
            <div class = "auth">
                {% if user.is_authenticated %}
                    <a href="/accounts/">Hello, {{ user.username }}!<div class="afterhover"></div></a>
                    <form action="{% url 'logout' %}" method="post" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit">Log Out</button><div class="afterhover"></div>
                    </form>
                {% else %}
                    <a href="{% url 'login' %}">Log In<div class="afterhover"></div></a>
                    <a href="{% url 'signup' %}">Sign Up<div class="afterhover"></div></a>
                {% endif %}
            </div>
        </nav>
    </header>

    <!-- MAIN CONTENT -->
    <main style="margin: auto;">
        {% block content %}

        <div class="gmail-layout">
            <!-- Sidebar -->
            <div class="sidebar">
                <button class="create-btn" onclick="location.href='{% url 'home:send_email' %}'">Create Email</button>
                <ul class="labels">
                    <li class="{% if request.GET.label == None %}active{% endif %}">
                        <a href="{% url 'home:index' %}">Inbox</a>
                        {% if unread_count > 0 %}<span class="count-badge">{{ unread_count }}</span>{% endif %}
                    </li>
                    <li class="{% if request.GET.label == 'sent' %}active{% endif %}">
                        <a href="/?label=sent">Sent</a>
                    </li>
                    <li class="{% if request.GET.label == 'phishing' %}active{% endif %}">
                        <a href="/?label=phishing">Phishing</a>
                        {% if phishing_unread_count > 0 %}<span class="count-badge">{{ phishing_unread_count }}</span>{% endif %}
                    </li>
                </ul>
            </div>

            <!-- Main content -->
            <div class="main">
                <!-- Top bar -->
                <div class="top-bar">
                    <div class="user-menu">
                        <span>{{ request.user.email }}</span>
                    </div>
                </div>

                <!-- Page-specific content -->
                {% block main_content %}{% endblock %}
            </div>
        </div>
        {% endblock %}
    </main>

    <!-- FOOTER -->
    <footer style="margin-bottom: auto;">
        <p>Footer</p>
    </footer>

</body>
</html>
